<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Financial analytics dashboard for the Epstein forensic network. Charts and analysis of $557M+ in documented wire transfers." />
    <title>Analytics — Epstein Forensic Finance</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@300;400;500&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="/src/styles/main.css" />
    <link rel="stylesheet" href="/src/styles/analytics.css" />
</head>

<body>

    <div id="analytics-app">

        <!-- Top Bar -->
        <header id="topbar">
            <div id="topbar-left">
                <div id="logo">
                    <span class="logo-icon">⬡</span>
                    <span class="logo-text">FORENSIC <span class="logo-accent">NETWORK</span></span>
                </div>
            </div>

            <div id="topbar-right">
                <nav id="page-nav" aria-label="Page navigation">
                    <a href="./index.html" class="nav-tab">Network</a>
                    <a href="./analytics.html" class="nav-tab active" aria-current="page">Analytics</a>
                </nav>
            </div>
        </header>

        <!-- Dashboard Scroll Container -->
        <div id="analytics-scroll">
            <main id="analytics-main">

                <!-- KPI Cards -->
                <section class="summary-row" aria-label="Summary statistics">
                    <div class="summary-card">
                        <div class="summary-value" id="kpi-total-flow">—</div>
                        <div class="summary-label">Total Flow</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="kpi-entities">—</div>
                        <div class="summary-label">Entities</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="kpi-transactions">—</div>
                        <div class="summary-label">Transactions</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="kpi-date-range">—</div>
                        <div class="summary-label">Date Range</div>
                    </div>
                </section>

                <!-- Charts -->
                <section class="chart-grid">

                    <!-- Chart 1: Top Entities Bar -->
                    <article class="chart-panel" id="panel-top-entities">
                        <h2 class="chart-title">Southern Trust and Leon Black dominate the $558M network</h2>
                        <p class="chart-subtitle">Top 20 entities ranked by combined inflow and outflow — hover to
                            inspect</p>
                        <div id="chart-top-entities" class="chart-container chart-tall"></div>
                    </article>

                    <!-- Chart 2: Arrow Dot Plot -->
                    <article class="chart-panel" id="panel-arrow-dot">
                        <h2 class="chart-title">Epstein's personal trusts act as pure capital sources, while banks serve
                            as high-volume intermediaries</h2>
                        <p class="chart-subtitle">Comparing Total In vs Total Out for the top 15 entities reveals
                            structural network roles</p>
                        <div id="chart-arrow-dot" class="chart-container chart-tall"></div>
                    </article>

                    <!-- Chart 3: Flow by Year -->
                    <article class="chart-panel" id="panel-flow-year">
                        <h2 class="chart-title">Network volume correlates with key legal events and banking transitions
                        </h2>
                        <p class="chart-subtitle">Total annual transaction flows annotated with major timeline events
                        </p>
                        <div id="chart-flow-year" class="chart-container chart-tall"></div>
                    </article>

                    <!-- Chart 4: Entity Small Multiples -->
                    <article class="chart-panel" id="panel-small-multiples">
                        <div
                            style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                            <div class="chart-header" style="flex: 1;">
                                <h2 class="chart-title">Key entities exhibit explosive spikes rather than sustained
                                    accumulation</h2>
                                <p class="chart-subtitle" style="margin-bottom: 0;">Individual transaction volume
                                    timelines for the top 12 network participants</p>
                            </div>
                            <div style="display: flex; gap: 16px; align-items: center;">
                                <div class="chart-controls"
                                    style="display: flex; gap: 4px; background: var(--bg-surface); border: 1px solid var(--border); border-radius: 6px; padding: 2px;">
                                    <button id="btn-group-shared-y"
                                        style="background: var(--border); color: var(--text-bright); border: none; padding: 6px 12px; border-radius: 4px; font-size: 13px; cursor: pointer; font-weight: 500;">Shared
                                        Y</button>
                                    <button id="btn-group-indep-y"
                                        style="background: transparent; color: var(--text-secondary); border: none; padding: 6px 12px; border-radius: 4px; font-size: 13px; cursor: pointer;">Indep.
                                        Y</button>
                                </div>
                                <div class="chart-controls"
                                    style="display: flex; gap: 4px; background: var(--bg-surface); border: 1px solid var(--border); border-radius: 6px; padding: 2px;">
                                    <button id="btn-group-month"
                                        style="background: var(--border); color: var(--text-bright); border: none; padding: 6px 12px; border-radius: 4px; font-size: 13px; cursor: pointer; font-weight: 500;">Month</button>
                                    <button id="btn-group-year"
                                        style="background: transparent; color: var(--text-secondary); border: none; padding: 6px 12px; border-radius: 4px; font-size: 13px; cursor: pointer;">Year</button>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 24px; align-items: flex-start;">
                            <!-- We use CSS grid to hold the individual small multiple SVGs -->
                            <div id="chart-small-multiples" class="chart-container" style="flex: 1; min-height: 480px;">
                            </div>

                            <!-- Side Pane for details -->
                            <aside id="entity-details-pane"
                                style="width: 320px; display: none; background: var(--bg-surface); border: 1px solid var(--border); border-radius: 8px; padding: 20px; flex-shrink: 0; position: sticky; top: 24px; max-height: calc(100vh - 48px); overflow-y: auto;">
                                <div id="entity-details-content">
                                    <!-- Populated dynamically -->
                                </div>
                            </aside>
                        </div>
                    </article>

                </section>

            </main>
        </div>

    </div>

    <script type="module" src="/src/analytics-init.js"></script>
</body>

</html>